-- MySQL Script generated by MySQL Workbench
-- Sun Jun  4 11:06:20 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema database
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema database
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `database` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `database` ;

-- -----------------------------------------------------
-- Table `database`.`categorias`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`categorias` (
  `id_Categoria` INT NOT NULL AUTO_INCREMENT,
  `nombre_categoria` VARCHAR(45) NOT NULL,
  `descripcion_categoria` VARCHAR(100) NOT NULL,
  `estado_categoria` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_Categoria`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`clientes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`clientes` (
  `Num_Documento` INT NOT NULL,
  `tipoDocumento` VARCHAR(45) NOT NULL,
  `nombre_completo` VARCHAR(45) NOT NULL,
  `direccion` VARCHAR(100) NOT NULL,
  `telefono` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  `contraseña` VARCHAR(100) NOT NULL,
  `barrio` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Num_Documento`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`producto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`producto` (
  `id_producto` INT NOT NULL AUTO_INCREMENT,
  `categoria_id_Categoria` INT NOT NULL,
  `nombre_producto` VARCHAR(50) NOT NULL,
  `descripcion_producto` VARCHAR(100) NOT NULL,
  `precio_producto` INT NOT NULL,
  `estado` INT NOT NULL,
  `marca_producto` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`id_producto`, `categoria_id_Categoria`),
  INDEX `fk_producto_categoria1_idx` (`categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_producto_categoria1`
    FOREIGN KEY (`categoria_id_Categoria`)
    REFERENCES `database`.`categorias` (`id_Categoria`))
ENGINE = InnoDB
AUTO_INCREMENT = 9
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`pedidos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`pedidos` (
  `idpedidos` INT NOT NULL AUTO_INCREMENT,
  `clientes_Num_Documento` INT NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  `Fecha_pedido` DATE NOT NULL,
  `Total_Pedido` INT NOT NULL,
  PRIMARY KEY (`idpedidos`, `clientes_Num_Documento`, `producto_id_producto`, `producto_categoria_id_Categoria`),
  INDEX `fk_pedidos_clientes_idx` (`clientes_Num_Documento` ASC) VISIBLE,
  INDEX `fk_pedidos_producto1_idx` (`producto_id_producto` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_pedidos_clientes`
    FOREIGN KEY (`clientes_Num_Documento`)
    REFERENCES `database`.`clientes` (`Num_Documento`),
  CONSTRAINT `fk_pedidos_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `categoria_id_Categoria`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`descuento_envios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`descuento_envios` (
  `id_cupon` INT NOT NULL AUTO_INCREMENT,
  `pedidos_idpedidos` INT NOT NULL,
  `tipo_descuento` VARCHAR(45) NOT NULL,
  `Mnt_Min_Apli_Descuento` INT NOT NULL,
  PRIMARY KEY (`id_cupon`, `pedidos_idpedidos`),
  INDEX `fk_descuento_envio_pedidos1_idx` (`pedidos_idpedidos` ASC) VISIBLE,
  CONSTRAINT `fk_descuento_envio_pedidos1`
    FOREIGN KEY (`pedidos_idpedidos`)
    REFERENCES `database`.`pedidos` (`idpedidos`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`estado_pedidos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`estado_pedidos` (
  `id_Pedido` INT NOT NULL AUTO_INCREMENT,
  `pedidos_idpedidos` INT NOT NULL,
  `pedidos_clientes_Num_Documento` INT NOT NULL,
  `descripcion_pedido` VARCHAR(100) NOT NULL,
  `fecha_creacion` DATE NOT NULL,
  `fecha_actualizacion` DATE NOT NULL,
  `Tipo_estado_pedido` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_Pedido`, `pedidos_idpedidos`, `pedidos_clientes_Num_Documento`),
  INDEX `fk_estado_pedidos_pedidos_idx` (`pedidos_clientes_Num_Documento` ASC, `pedidos_idpedidos` ASC) VISIBLE,
  CONSTRAINT `fk_estado_pedido1_pedidos`
    FOREIGN KEY (`pedidos_clientes_Num_Documento` , `pedidos_idpedidos`)
    REFERENCES `database`.`pedidos` (`clientes_Num_Documento` , `idpedidos`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`facturas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`facturas` (
  `idfactura` INT NOT NULL AUTO_INCREMENT,
  `pedidos_idpedidos` INT NOT NULL,
  `pedidos_clientes_Num_Documento` INT NOT NULL,
  `pedidos_producto_id_producto` INT NOT NULL,
  `pedidos_producto_categoria_id_Categoria` INT NOT NULL,
  `impuestos` VARCHAR(45) NOT NULL,
  `total_factura` VARCHAR(45) NOT NULL,
  `Fecha_factura` DATE NOT NULL,
  PRIMARY KEY (`idfactura`, `pedidos_idpedidos`, `pedidos_clientes_Num_Documento`, `pedidos_producto_id_producto`, `pedidos_producto_categoria_id_Categoria`),
  INDEX `fk_factura_pedidos1_idx` (`pedidos_idpedidos` ASC, `pedidos_clientes_Num_Documento` ASC, `pedidos_producto_id_producto` ASC, `pedidos_producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_factura_pedidos1`
    FOREIGN KEY (`pedidos_idpedidos` , `pedidos_clientes_Num_Documento` , `pedidos_producto_id_producto` , `pedidos_producto_categoria_id_Categoria`)
    REFERENCES `database`.`pedidos` (`idpedidos` , `clientes_Num_Documento` , `producto_id_producto` , `producto_categoria_id_Categoria`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`failed_jobs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`failed_jobs` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `uuid` VARCHAR(255) NOT NULL,
  `connection` TEXT NOT NULL,
  `queue` TEXT NOT NULL,
  `payload` LONGTEXT NOT NULL,
  `exception` LONGTEXT NOT NULL,
  `failed_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `failed_jobs_uuid_unique` (`uuid` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`inventarios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`inventarios` (
  `id_inventario` INT NOT NULL AUTO_INCREMENT,
  `fecha_entrada` TIME NOT NULL,
  `cantidad_disponible` INT NOT NULL,
  `estado_inventario` VARCHAR(45) NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_proveedor_idProveedor` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`id_inventario`, `producto_id_producto`, `producto_proveedor_idProveedor`, `producto_categoria_id_Categoria`),
  INDEX `fk_inventario_producto1_idx` (`producto_id_producto` ASC, `producto_proveedor_idProveedor` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  INDEX `fk_inventario_producto1` (`producto_id_producto` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_inventario_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `categoria_id_Categoria`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`metodos_pagos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`metodos_pagos` (
  `idmetodos_pago` INT NOT NULL,
  `Nombre_metodo_pago` VARCHAR(45) NOT NULL,
  `descripcion` VARCHAR(45) NOT NULL,
  `Comision` DOUBLE NOT NULL,
  `factura_idfactura` INT NOT NULL,
  `factura_pedidos_idpedidos` INT NOT NULL,
  `factura_pedidos_clientes_Num_Documento` INT NOT NULL,
  `factura_pedidos_producto_id_producto` INT NOT NULL,
  `factura_pedidos_producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`idmetodos_pago`, `factura_idfactura`, `factura_pedidos_idpedidos`, `factura_pedidos_clientes_Num_Documento`, `factura_pedidos_producto_id_producto`, `factura_pedidos_producto_categoria_id_Categoria`),
  INDEX `fk_metodos_pago_factura1_idx` (`factura_idfactura` ASC, `factura_pedidos_idpedidos` ASC, `factura_pedidos_clientes_Num_Documento` ASC, `factura_pedidos_producto_id_producto` ASC, `factura_pedidos_producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_metodos_pago_factura1`
    FOREIGN KEY (`factura_idfactura` , `factura_pedidos_idpedidos` , `factura_pedidos_clientes_Num_Documento` , `factura_pedidos_producto_id_producto` , `factura_pedidos_producto_categoria_id_Categoria`)
    REFERENCES `database`.`facturas` (`idfactura` , `pedidos_idpedidos` , `pedidos_clientes_Num_Documento` , `pedidos_producto_id_producto` , `pedidos_producto_categoria_id_Categoria`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`migrations`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`migrations` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `migration` VARCHAR(255) NOT NULL,
  `batch` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 7
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`permissions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`permissions` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  `guard_name` VARCHAR(255) NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `permissions_name_guard_name_unique` (`name` ASC, `guard_name` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`model_has_permissions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`model_has_permissions` (
  `permission_id` BIGINT UNSIGNED NOT NULL,
  `model_type` VARCHAR(255) NOT NULL,
  `model_id` BIGINT UNSIGNED NOT NULL,
  PRIMARY KEY (`permission_id`, `model_id`, `model_type`),
  INDEX `model_has_permissions_model_id_model_type_index` (`model_id` ASC, `model_type` ASC) VISIBLE,
  CONSTRAINT `model_has_permissions_permission_id_foreign`
    FOREIGN KEY (`permission_id`)
    REFERENCES `database`.`permissions` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`roles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`roles` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  `guard_name` VARCHAR(255) NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `roles_name_guard_name_unique` (`name` ASC, `guard_name` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`model_has_roles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`model_has_roles` (
  `role_id` BIGINT UNSIGNED NOT NULL,
  `model_type` VARCHAR(255) NOT NULL,
  `model_id` BIGINT UNSIGNED NOT NULL,
  PRIMARY KEY (`role_id`, `model_id`, `model_type`),
  INDEX `model_has_roles_model_id_model_type_index` (`model_id` ASC, `model_type` ASC) VISIBLE,
  CONSTRAINT `model_has_roles_role_id_foreign`
    FOREIGN KEY (`role_id`)
    REFERENCES `database`.`roles` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`password_reset_tokens`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`password_reset_tokens` (
  `email` VARCHAR(255) NOT NULL,
  `token` VARCHAR(255) NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`email`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`password_resets`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`password_resets` (
  `email` VARCHAR(255) NOT NULL,
  `token` VARCHAR(255) NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  INDEX `password_resets_email_index` (`email` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`personal_access_tokens`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`personal_access_tokens` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `tokenable_type` VARCHAR(255) NOT NULL,
  `tokenable_id` BIGINT UNSIGNED NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `token` VARCHAR(64) NOT NULL,
  `abilities` TEXT NULL DEFAULT NULL,
  `last_used_at` TIMESTAMP NULL DEFAULT NULL,
  `expires_at` TIMESTAMP NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `personal_access_tokens_token_unique` (`token` ASC) VISIBLE,
  INDEX `personal_access_tokens_tokenable_type_tokenable_id_index` (`tokenable_type` ASC, `tokenable_id` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`producto_has_usuarios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`producto_has_usuarios` (
  `producto_id_producto` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`producto_id_producto`, `producto_categoria_id_Categoria`),
  INDEX `fk_producto_has_usuarios_producto1_idx` (`producto_id_producto` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_producto_has_usuarios_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `categoria_id_Categoria`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`proveedores`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`proveedores` (
  `idProveedor` INT NOT NULL AUTO_INCREMENT,
  `Num_Documento` INT NOT NULL,
  `Tipo_Documento` VARCHAR(45) NOT NULL,
  `nombre_pro` VARCHAR(100) NOT NULL,
  `direccion` VARCHAR(45) NOT NULL,
  `correo_electronico` VARCHAR(45) NOT NULL,
  `telefono` VARCHAR(45) NOT NULL,
  `estado_proveedor` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idProveedor`))
ENGINE = InnoDB
AUTO_INCREMENT = 901
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`proveedor_has_productos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`proveedor_has_productos` (
  `proveedor_idProveedor` INT NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`proveedor_idProveedor`, `producto_id_producto`, `producto_categoria_id_Categoria`),
  INDEX `fk_proveedor_has_producto_producto1_idx` (`producto_id_producto` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  INDEX `fk_proveedor_has_producto_proveedor1_idx` (`proveedor_idProveedor` ASC) VISIBLE,
  CONSTRAINT `fk_proveedor_has_producto_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `categoria_id_Categoria`),
  CONSTRAINT `fk_proveedor_has_producto_proveedor1`
    FOREIGN KEY (`proveedor_idProveedor`)
    REFERENCES `database`.`proveedores` (`idProveedor`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`registro_historico_proveedores`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`registro_historico_proveedores` (
  `idhistorial_proveedor` INT NOT NULL AUTO_INCREMENT,
  `fecha_compra_producto` DATE NOT NULL,
  `historial_proveedorcol` VARCHAR(45) NOT NULL,
  `nombre_producto_comprado` VARCHAR(200) NOT NULL,
  `cantida_Productos_Comprados` INT NOT NULL,
  `precio_Unitario` INT NOT NULL,
  `precio_Total` INT NOT NULL,
  `observaciones` VARCHAR(100) NOT NULL,
  `proveedor_idProveedor` INT NOT NULL,
  `proveedor_producto_id_producto` INT NOT NULL,
  `proveedor_producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`idhistorial_proveedor`, `proveedor_idProveedor`, `proveedor_producto_id_producto`, `proveedor_producto_categoria_id_Categoria`),
  INDEX `fk_registro_historico_proveedor_proveedor1_idx` (`proveedor_idProveedor` ASC, `proveedor_producto_id_producto` ASC, `proveedor_producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_registro_historico_proveedor_proveedor1`
    FOREIGN KEY (`proveedor_idProveedor`)
    REFERENCES `database`.`proveedores` (`idProveedor`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`reseñas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`reseñas` (
  `idreseña` INT NOT NULL AUTO_INCREMENT,
  `clientes_Num_Documento` INT NOT NULL,
  `producto_proveedor_idProveedor` INT NOT NULL,
  `Comentario` TEXT NOT NULL,
  `Fecha_Comentario` DATE NOT NULL,
  `Valoracion` INT NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_proveedor_idProveedor1` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`idreseña`, `clientes_Num_Documento`, `producto_proveedor_idProveedor`, `producto_id_producto`, `producto_proveedor_idProveedor1`, `producto_categoria_id_Categoria`),
  INDEX `fk_reseña_clientes1_idx` (`clientes_Num_Documento` ASC) VISIBLE,
  INDEX `fk_reseña_producto1_idx` (`producto_id_producto` ASC, `producto_proveedor_idProveedor1` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  INDEX `fk_reseña_producto1` (`producto_id_producto` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_reseña_clientes1`
    FOREIGN KEY (`clientes_Num_Documento`)
    REFERENCES `database`.`clientes` (`Num_Documento`),
  CONSTRAINT `fk_reseña_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `categoria_id_Categoria`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`role_has_permissions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`role_has_permissions` (
  `permission_id` BIGINT UNSIGNED NOT NULL,
  `role_id` BIGINT UNSIGNED NOT NULL,
  PRIMARY KEY (`permission_id`, `role_id`),
  INDEX `role_has_permissions_role_id_foreign` (`role_id` ASC) VISIBLE,
  CONSTRAINT `role_has_permissions_permission_id_foreign`
    FOREIGN KEY (`permission_id`)
    REFERENCES `database`.`permissions` (`id`)
    ON DELETE CASCADE,
  CONSTRAINT `role_has_permissions_role_id_foreign`
    FOREIGN KEY (`role_id`)
    REFERENCES `database`.`roles` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `database`.`transportadora`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`transportadora` (
  `idtransportadora` INT NOT NULL AUTO_INCREMENT,
  `nombre_Transportadora` VARCHAR(45) NOT NULL,
  `Num_Documento_Transportadora` INT NOT NULL,
  `Tipo_Documento` VARCHAR(45) NOT NULL,
  `Direccion_Sede_Principal` VARCHAR(45) NOT NULL,
  `Ciudad_Sede_Principal` VARCHAR(45) NOT NULL,
  `Telefono` VARCHAR(45) NOT NULL,
  `Correo` VARCHAR(45) NOT NULL,
  `Sitio_Web` VARCHAR(45) NOT NULL,
  `Servicios_Ofrecidos` VARCHAR(100) NOT NULL,
  `Areas_Servicio` VARCHAR(45) NOT NULL,
  `Tarifas` VARCHAR(45) NOT NULL,
  `Estado_Transportadora` VARCHAR(45) NOT NULL,
  `estado_pedido_id_Pedido` INT NOT NULL,
  `estado_pedido_pedidos_idpedidos` INT NOT NULL,
  `estado_pedido_pedidos_clientes_Num_Documento` INT NOT NULL,
  PRIMARY KEY (`idtransportadora`, `estado_pedido_id_Pedido`, `estado_pedido_pedidos_idpedidos`, `estado_pedido_pedidos_clientes_Num_Documento`),
  INDEX `fk_transportadora_estado_pedido1_idx` (`estado_pedido_id_Pedido` ASC, `estado_pedido_pedidos_idpedidos` ASC, `estado_pedido_pedidos_clientes_Num_Documento` ASC) VISIBLE,
  CONSTRAINT `fk_transportadora_estado_pedido1`
    FOREIGN KEY (`estado_pedido_id_Pedido` , `estado_pedido_pedidos_idpedidos` , `estado_pedido_pedidos_clientes_Num_Documento`)
    REFERENCES `database`.`estado_pedidos` (`id_Pedido` , `pedidos_idpedidos` , `pedidos_clientes_Num_Documento`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`users` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `email_verified_at` TIMESTAMP NULL DEFAULT NULL,
  `password` VARCHAR(255) NOT NULL,
  `remember_token` VARCHAR(100) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `users_email_unique` (`email` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
