-- MySQL Script generated by MySQL Workbench
-- Wed May 17 10:01:22 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema database
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema database
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `database` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `database` ;

-- -----------------------------------------------------
-- Table `database`.`categoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`categoria` (
  `id_Categoria` INT NOT NULL AUTO_INCREMENT,
  `nombre_categoria` VARCHAR(45) NOT NULL,
  `descripcion_categoria` VARCHAR(100) NOT NULL,
  `estado_categoria` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_Categoria`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`clientes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`clientes` (
  `Num_Documento` INT NOT NULL,
  `tipoDocumento` VARCHAR(45) NOT NULL,
  `nombre_completo` VARCHAR(45) NOT NULL,
  `direccion` VARCHAR(100) NOT NULL,
  `telefono` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  `contraseña` VARCHAR(100) NOT NULL,
  `barrio` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Num_Documento`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`producto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`producto` (
  `id_producto` INT NOT NULL AUTO_INCREMENT,
  `proveedor_idProveedor` INT NOT NULL,
  `categoria_id_Categoria` INT NOT NULL,
  `nombre_producto` VARCHAR(50) NOT NULL,
  `descripcion_producto` VARCHAR(100) NOT NULL,
  `precio_producto` INT NOT NULL,
  `estado` INT NOT NULL,
  `marca_producto` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`id_producto`, `proveedor_idProveedor`, `categoria_id_Categoria`),
  INDEX `fk_producto_categoria1_idx` (`categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_producto_categoria1`
    FOREIGN KEY (`categoria_id_Categoria`)
    REFERENCES `database`.`categoria` (`id_Categoria`))
ENGINE = InnoDB
AUTO_INCREMENT = 9
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`pedidos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`pedidos` (
  `idpedidos` INT NOT NULL AUTO_INCREMENT,
  `producto_id_producto` INT NOT NULL,
  `producto_proveedor_idProveedor` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  `clientes_Num_Documento` INT NOT NULL,
  `Fecha_pedido` DATE NOT NULL,
  `Total_Pedido` INT NOT NULL,
  PRIMARY KEY (`idpedidos`, `producto_id_producto`, `producto_proveedor_idProveedor`, `producto_categoria_id_Categoria`, `clientes_Num_Documento`),
  INDEX `fk_pedidos_clientes_idx` (`clientes_Num_Documento` ASC) VISIBLE,
  INDEX `fk_pedidos_producto1_idx` (`producto_id_producto` ASC, `producto_proveedor_idProveedor` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_pedidos_clientes`
    FOREIGN KEY (`clientes_Num_Documento`)
    REFERENCES `database`.`clientes` (`Num_Documento`),
  CONSTRAINT `fk_pedidos_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_proveedor_idProveedor` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `proveedor_idProveedor` , `categoria_id_Categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`descuento_envio`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`descuento_envio` (
  `id_cupon` INT NOT NULL AUTO_INCREMENT,
  `pedidos_idpedidos` INT NOT NULL,
  `tipo_descuento` VARCHAR(45) NOT NULL,
  `Mnt_Min_Apli_Descuento` INT NOT NULL,
  PRIMARY KEY (`id_cupon`, `pedidos_idpedidos`),
  INDEX `fk_descuento_envio_pedidos1_idx` (`pedidos_idpedidos` ASC) VISIBLE,
  CONSTRAINT `fk_descuento_envio_pedidos1`
    FOREIGN KEY (`pedidos_idpedidos`)
    REFERENCES `database`.`pedidos` (`idpedidos`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`estado_pedido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`estado_pedido` (
  `id_Pedido` INT NOT NULL AUTO_INCREMENT,
  `pedidos_idpedidos` INT NOT NULL,
  `pedidos_clientes_Num_Documento` INT NOT NULL,
  `descripcion_pedido` VARCHAR(100) NOT NULL,
  `fecha_creacion` DATE NOT NULL,
  `fecha_actualizacion` DATE NOT NULL,
  `Tipo_estado_pedido` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id_Pedido`, `pedidos_idpedidos`, `pedidos_clientes_Num_Documento`),
  INDEX `fk_estado_pedidos_pedidos_idx` (`pedidos_clientes_Num_Documento` ASC, `pedidos_idpedidos` ASC) VISIBLE,
  CONSTRAINT `fk_estado_pedido1_pedidos`
    FOREIGN KEY (`pedidos_clientes_Num_Documento` , `pedidos_idpedidos`)
    REFERENCES `database`.`pedidos` (`clientes_Num_Documento` , `idpedidos`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`factura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`factura` (
  `idfactura` INT NOT NULL AUTO_INCREMENT,
  `impuestos` VARCHAR(45) NOT NULL,
  `total_factura` VARCHAR(45) NOT NULL,
  `Fecha_factura` DATE NOT NULL,
  `pedidos_idpedidos` INT NOT NULL,
  `pedidos_producto_id_producto` INT NOT NULL,
  `pedidos_producto_proveedor_idProveedor` INT NOT NULL,
  `pedidos_producto_categoria_id_Categoria` INT NOT NULL,
  `pedidos_clientes_Num_Documento` INT NOT NULL,
  PRIMARY KEY (`idfactura`, `pedidos_idpedidos`, `pedidos_producto_id_producto`, `pedidos_producto_proveedor_idProveedor`, `pedidos_producto_categoria_id_Categoria`, `pedidos_clientes_Num_Documento`),
  INDEX `fk_factura_pedidos1_idx` (`pedidos_idpedidos` ASC, `pedidos_producto_id_producto` ASC, `pedidos_producto_proveedor_idProveedor` ASC, `pedidos_producto_categoria_id_Categoria` ASC, `pedidos_clientes_Num_Documento` ASC) VISIBLE,
  CONSTRAINT `fk_factura_pedidos1`
    FOREIGN KEY (`pedidos_idpedidos` , `pedidos_producto_id_producto` , `pedidos_producto_proveedor_idProveedor` , `pedidos_producto_categoria_id_Categoria` , `pedidos_clientes_Num_Documento`)
    REFERENCES `database`.`pedidos` (`idpedidos` , `producto_id_producto` , `producto_proveedor_idProveedor` , `producto_categoria_id_Categoria` , `clientes_Num_Documento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`inventario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`inventario` (
  `id_inventario` INT NOT NULL AUTO_INCREMENT,
  `fecha_entrada` TIME NOT NULL,
  `cantidad_disponible` INT NOT NULL,
  `estado_inventario` VARCHAR(45) NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_proveedor_idProveedor` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`id_inventario`, `producto_id_producto`, `producto_proveedor_idProveedor`, `producto_categoria_id_Categoria`),
  INDEX `fk_inventario_producto1_idx` (`producto_id_producto` ASC, `producto_proveedor_idProveedor` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_inventario_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_proveedor_idProveedor` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `proveedor_idProveedor` , `categoria_id_Categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`metodos_pago`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`metodos_pago` (
  `idmetodos_pago` INT NOT NULL,
  `Nombre_metodo_pago` VARCHAR(45) NOT NULL,
  `descripcion` VARCHAR(45) NOT NULL,
  `Comision` DOUBLE NOT NULL,
  `factura_idfactura` INT NOT NULL,
  `factura_pedidos_idpedidos` INT NOT NULL,
  `factura_pedidos_clientes_Num_Documento` INT NOT NULL,
  PRIMARY KEY (`idmetodos_pago`, `factura_idfactura`, `factura_pedidos_idpedidos`, `factura_pedidos_clientes_Num_Documento`),
  INDEX `fk_metodos_pago_factura1_idx` (`factura_idfactura` ASC, `factura_pedidos_idpedidos` ASC, `factura_pedidos_clientes_Num_Documento` ASC) VISIBLE,
  CONSTRAINT `fk_metodos_pago_factura1`
    FOREIGN KEY (`factura_idfactura`)
    REFERENCES `database`.`factura` (`idfactura`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`proveedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`proveedor` (
  `idProveedor` INT NOT NULL AUTO_INCREMENT,
  `idDocumento` INT NOT NULL,
  `Tipo_Documento` VARCHAR(45) NOT NULL,
  `nombre_pro` VARCHAR(100) NOT NULL,
  `direccion` VARCHAR(45) NOT NULL,
  `correo_electronico` VARCHAR(45) NOT NULL,
  `telefono` VARCHAR(45) NOT NULL,
  `estado_proveedor` VARCHAR(45) NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_proveedor_idProveedor` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`idProveedor`, `producto_id_producto`, `producto_proveedor_idProveedor`, `producto_categoria_id_Categoria`),
  INDEX `fk_proveedor_producto1_idx` (`producto_id_producto` ASC, `producto_proveedor_idProveedor` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_proveedor_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_proveedor_idProveedor` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `proveedor_idProveedor` , `categoria_id_Categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 901
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`registro_historico_proveedor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`registro_historico_proveedor` (
  `idhistorial_proveedor` INT NOT NULL AUTO_INCREMENT,
  `proveedor_idProveedor` INT NOT NULL,
  `fecha_compra_producto` DATE NOT NULL,
  `historial_proveedorcol` VARCHAR(45) NOT NULL,
  `nombre_producto_comprado` VARCHAR(200) NOT NULL,
  `cantida_Productos_Comprados` INT NOT NULL,
  `precio_Unitario` INT NOT NULL,
  `precio_Total` INT NOT NULL,
  `observaciones` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`idhistorial_proveedor`, `proveedor_idProveedor`),
  INDEX `fk_registro_historico_proveedor_proveedor1_idx` (`proveedor_idProveedor` ASC) VISIBLE,
  CONSTRAINT `fk_registro_historico_proveedor_proveedor1`
    FOREIGN KEY (`proveedor_idProveedor`)
    REFERENCES `database`.`proveedor` (`idProveedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`reseña`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`reseña` (
  `idreseña` INT NOT NULL AUTO_INCREMENT,
  `clientes_Num_Documento` INT NOT NULL,
  `producto_proveedor_idProveedor` INT NOT NULL,
  `Comentario` TEXT NOT NULL,
  `Fecha_Comentario` DATE NOT NULL,
  `Valoracion` INT NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_proveedor_idProveedor1` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`idreseña`, `clientes_Num_Documento`, `producto_proveedor_idProveedor`, `producto_id_producto`, `producto_proveedor_idProveedor1`, `producto_categoria_id_Categoria`),
  INDEX `fk_reseña_clientes1_idx` (`clientes_Num_Documento` ASC) VISIBLE,
  INDEX `fk_reseña_producto1_idx` (`producto_id_producto` ASC, `producto_proveedor_idProveedor1` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  CONSTRAINT `fk_reseña_clientes1`
    FOREIGN KEY (`clientes_Num_Documento`)
    REFERENCES `database`.`clientes` (`Num_Documento`),
  CONSTRAINT `fk_reseña_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_proveedor_idProveedor1` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `proveedor_idProveedor` , `categoria_id_Categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`usuarios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`usuarios` (
  `idusuarios` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `apellido` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(100) NOT NULL,
  `contraseña` VARCHAR(100) NOT NULL,
  `rol` VARCHAR(45) NOT NULL,
  `cedula` INT NOT NULL,
  PRIMARY KEY (`idusuarios`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`transportadora`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`transportadora` (
  `idtransportadora` INT NOT NULL AUTO_INCREMENT,
  `nombre_Transportadora` VARCHAR(45) NOT NULL,
  `Num_Documento_Transportadora` INT NOT NULL,
  `Tipo_Documento` VARCHAR(45) NOT NULL,
  `Direccion_Sede_Principal` VARCHAR(45) NOT NULL,
  `Ciudad_Sede_Principal` VARCHAR(45) NOT NULL,
  `Telefono` VARCHAR(45) NOT NULL,
  `Correo` VARCHAR(45) NOT NULL,
  `Sitio_Web` VARCHAR(45) NOT NULL,
  `Servicios_Ofrecidos` VARCHAR(100) NOT NULL,
  `Areas_Servicio` VARCHAR(45) NOT NULL,
  `Tarifas` VARCHAR(45) NOT NULL,
  `Estado_Transportadora` VARCHAR(45) NOT NULL,
  `estado_pedido_id_Pedido` INT NOT NULL,
  `estado_pedido_pedidos_idpedidos` INT NOT NULL,
  `estado_pedido_pedidos_clientes_Num_Documento` INT NOT NULL,
  PRIMARY KEY (`idtransportadora`, `estado_pedido_id_Pedido`, `estado_pedido_pedidos_idpedidos`, `estado_pedido_pedidos_clientes_Num_Documento`),
  INDEX `fk_transportadora_estado_pedido1_idx` (`estado_pedido_id_Pedido` ASC, `estado_pedido_pedidos_idpedidos` ASC, `estado_pedido_pedidos_clientes_Num_Documento` ASC) VISIBLE,
  CONSTRAINT `fk_transportadora_estado_pedido1`
    FOREIGN KEY (`estado_pedido_id_Pedido` , `estado_pedido_pedidos_idpedidos` , `estado_pedido_pedidos_clientes_Num_Documento`)
    REFERENCES `database`.`estado_pedido` (`id_Pedido` , `pedidos_idpedidos` , `pedidos_clientes_Num_Documento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `database`.`usuarios_has_producto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`usuarios_has_producto` (
  `usuarios_idusuarios` INT NOT NULL,
  `producto_id_producto` INT NOT NULL,
  `producto_proveedor_idProveedor` INT NOT NULL,
  `producto_categoria_id_Categoria` INT NOT NULL,
  PRIMARY KEY (`usuarios_idusuarios`, `producto_id_producto`, `producto_proveedor_idProveedor`, `producto_categoria_id_Categoria`),
  INDEX `fk_usuarios_has_producto_producto1_idx` (`producto_id_producto` ASC, `producto_proveedor_idProveedor` ASC, `producto_categoria_id_Categoria` ASC) VISIBLE,
  INDEX `fk_usuarios_has_producto_usuarios1_idx` (`usuarios_idusuarios` ASC) VISIBLE,
  CONSTRAINT `fk_usuarios_has_producto_usuarios1`
    FOREIGN KEY (`usuarios_idusuarios`)
    REFERENCES `database`.`usuarios` (`idusuarios`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_usuarios_has_producto_producto1`
    FOREIGN KEY (`producto_id_producto` , `producto_proveedor_idProveedor` , `producto_categoria_id_Categoria`)
    REFERENCES `database`.`producto` (`id_producto` , `proveedor_idProveedor` , `categoria_id_Categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `database`.`roles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `database`.`roles` (
  `idroles` INT NOT NULL AUTO_INCREMENT,
  `nombreRol` VARCHAR(45) NOT NULL,
  `descripcionRol` VARCHAR(45) NOT NULL,
  `usuarios_idusuarios` INT NOT NULL,
  `clientes_Num_Documento` INT NOT NULL,
  PRIMARY KEY (`idroles`, `usuarios_idusuarios`, `clientes_Num_Documento`),
  INDEX `fk_roles_usuarios1_idx` (`usuarios_idusuarios` ASC) VISIBLE,
  INDEX `fk_roles_clientes1_idx` (`clientes_Num_Documento` ASC) VISIBLE,
  CONSTRAINT `fk_roles_usuarios1`
    FOREIGN KEY (`usuarios_idusuarios`)
    REFERENCES `database`.`usuarios` (`idusuarios`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_roles_clientes1`
    FOREIGN KEY (`clientes_Num_Documento`)
    REFERENCES `database`.`clientes` (`Num_Documento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
